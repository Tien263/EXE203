@model Exe_Demo.Models.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Trang Chủ";
}

<style>
    .hero-wrap {
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        min-height: 400px;
        position: relative;
        padding: 80px 0;
    }
</style>

<!-- Hero Section -->
<div class="hero-wrap" style="background-image: url('/images/bg_1.jpg'); background-position: 50% 50%;" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text align-items-center justify-content-center">
            <div class="col-md-8 ftco-animate d-flex align-items-end">
                <div class="text w-100 text-center">
                    <h1 class="mb-4">Chất mộc, <span>vị nguyên vẹn</span>.</h1>
                    <p>
                        <a href="@Url.Action("Index", "Product")" class="btn btn-primary py-2 px-4">Mua ngay</a>
                        <a href="@Url.Action("Index", "About")" class="btn btn-white btn-outline-white py-2 px-4">Xem thêm</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Intro Section -->
<section class="ftco-intro">
    <div class="container">
        <div class="row no-gutters">
            <div class="col-md-4 d-flex">
                <div class="intro d-lg-flex w-100 ftco-animate">
                    <div class="icon">
                        <span class="flaticon-support"></span>
                    </div>
                    <div class="text">
                        <h2>Hỗ trợ nhiệt tình 24/7</h2>
                        <p>Luôn sẵn sàng lắng nghe và giải đáp mọi thắc mắc để bạn yên tâm lựa chọn đặc sản hoa quả sấy Mộc Châu bất cứ lúc nào.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 d-flex">
                <div class="intro color-1 d-lg-flex w-100 ftco-animate">
                    <div class="icon">
                        <span class="flaticon-cashback"></span>
                    </div>
                    <div class="text">
                        <h2>CAM KẾT HOÀN TIỀN</h2>
                        <p>Nếu sản phẩm không đúng cam kết, chúng tôi sẵn sàng hoàn tiền 100%. Mỗi gói hoa quả sấy đều được tuyển chọn kỹ lưỡng.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 d-flex">
                <div class="intro color-2 d-lg-flex w-100 ftco-animate">
                    <div class="icon">
                        <span class="flaticon-free-delivery"></span>
                    </div>
                    <div class="text">
                        <h2>GIAO HÀNG MIỄN PHÍ &amp; ĐỔI TRẢ DỄ DÀNG</h2>
                        <p>Miễn phí vận chuyển toàn quốc, hỗ trợ đổi trả linh hoạt để bạn luôn hài lòng với hương vị tinh túy từ Mộc Châu.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="ftco-section ftco-no-pb">
    <div class="container">
        <div class="row">
            <div class="col-md-6 d-flex justify-content-center align-items-center">
                <video class="w-100 h-100" autoplay muted loop>
                    <source src="/videos/about1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <div class="col-md-6 wrap-about pl-md-5 ftco-animate py-5">
                <div class="heading-section">
                    <span class="subheading">Mộc Vị – Hoa Quả Sấy Mộc Châu</span>
                    <h2 class="mb-4">Hương Vị Nguyên Bản Từ Núi Rừng</h2>
                    <p>Hoa trái Mộc Châu mang trong mình vị ngọt của đất trời, nhưng niềm vui ấy thường trôi qua nhanh, bởi trái tươi khó giữ trọn vẹn để đến được với người xa.</p>
                    <p>Mộc Vị ra đời để níu giữ khoảnh khắc ấy – lưu lại sắc hồng nguyên bản của quả, hương thơm tinh khiết từ núi rừng, và bản sắc ngàn đời của cao nguyên.</p>
                    <p>Với công nghệ sấy hiện đại, từng lát hoa quả được giữ nguyên hương vị tự nhiên, vừa giòn ngọt vừa bổ dưỡng.</p>
                    <p class="mt-4">
                        <a href="@Url.Action("Index", "About")" class="btn btn-primary py-3 px-4">Tìm hiểu thêm</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CSS for Premium Product Card -->
<style>
    .product-card-premium {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        margin-bottom: 30px;
        height: 100%;
        display: flex;
        flex-direction: column;
        border: 1px solid #f0f0f0;
    }

    .product-card-premium:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.12);
        border-color: #d8e2dc;
    }

    .product-img-wrap {
        position: relative;
        overflow: hidden;
        padding-top: 100%; /* 1:1 Aspect Ratio */
    }

    .product-img-wrap img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .product-card-premium:hover .product-img-wrap img {
        transform: scale(1.05);
    }

    .product-content {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
        text-align: left;
    }

    .product-category {
        font-size: 13px;
        color: #888;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .product-title {
        font-family: 'Spectral', serif;
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 15px;
        line-height: 1.3;
    }

    .product-title a {
        color: #333;
        text-decoration: none;
        transition: color 0.3s;
    }

    .product-title a:hover {
        color: #4f6a4c;
    }

    .product-price-row {
        margin-top: auto;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
    }

    .current-price {
        font-size: 20px;
        font-weight: 700;
        color: #4f6a4c;
    }

    .old-price {
        font-size: 15px;
        color: #aaa;
        text-decoration: line-through;
        margin-right: 10px;
    }

    .product-actions {
        display: flex;
        gap: 10px;
    }

    .btn-action {
        flex: 1;
        padding: 10px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        text-align: center;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        border: none;
        cursor: pointer;
    }

    .btn-view {
        background: #f8f9fa;
        color: #333;
        border: 1px solid #e0e0e0;
        text-decoration: none !important;
    }

    .btn-view:hover {
        background: #e2e6ea;
        color: #333;
    }

    .btn-buy {
        background: #4f6a4c;
        color: white;
    }

    .btn-buy:hover {
        background: #3d5239;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(79, 106, 76, 0.3);
    }

    .status-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
        z-index: 2;
    }

    .status-new {
        background: #4f6a4c;
        color: white;
    }

    .status-sale {
        background: #dc3545;
        color: white;
    }
</style>

<!-- Products Section -->
<section class="ftco-section bg-light">
    <div class="container">
        <div class="row justify-content-center mb-3 pb-3">
            <div class="col-md-12 heading-section text-center ftco-animate">
                <span class="subheading">Lựa Chọn Hàng Đầu</span>
                <h2 class="mb-4">Sản Phẩm Nổi Bật</h2>
                <p>Khám phá các loại hoa quả sấy đặc sản từ Mộc Châu</p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row justify-content-center">
            @if (Model.FeaturedProducts != null && Model.FeaturedProducts.Any())
            {
                foreach (var product in Model.FeaturedProducts)
                {
                    <div class="col-md-6 col-lg-3 ftco-animate">
                        <div class="product-card-premium">
                            <a href="@Url.Action("Details", "Product", new { id = product.ProductId })" class="product-img-wrap">
                                <img src="@(product.ImageUrl ?? "/images/prod-1.jpg")" alt="@product.ProductName">
                                @if (product.IsNew == true)
                                {
                                    <span class="status-badge status-new">Mới</span>
                                }
                                else if (product.DiscountPercent > 0)
                                {
                                    <span class="status-badge status-sale">-@product.DiscountPercent%</span>
                                }
                            </a>
                            <div class="product-content">
                                <div class="product-category">Hoa Quả Sấy</div>
                                <h3 class="product-title">
                                    <a href="@Url.Action("Details", "Product", new { id = product.ProductId })">@product.ProductName</a>
                                </h3>
                                
                                <div class="product-price-row">
                                    @if (product.OriginalPrice > product.Price)
                                    {
                                        <span class="old-price">@product.OriginalPrice.Value.ToString("N0") đ</span>
                                    }
                                    <span class="current-price">@product.Price.ToString("N0") đ</span>
                                </div>

                                <div class="product-actions">
                                    <a href="@Url.Action("Details", "Product", new { id = product.ProductId })" class="btn-action btn-view">
                                        <i class="fa fa-eye"></i> Chi tiết
                                    </a>
                                    <form asp-controller="Cart" asp-action="AddToCart" method="post" class="flex-grow-1" style="flex: 1; display: flex;">
                                        <input type="hidden" name="productId" value="@product.ProductId" />
                                        <input type="hidden" name="quantity" value="1" />
                                        <button type="submit" class="btn-action btn-buy w-100">
                                            <i class="fa fa-shopping-cart"></i> Mua ngay
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12 text-center">
                    <p>Chưa có sản phẩm nổi bật nào.</p>
                </div>
            }
        </div>
        
        <div class="row mt-5">
            <div class="col text-center">
                <a href="@Url.Action("Index", "Product")" class="btn btn-primary py-3 px-5">Xem tất cả sản phẩm</a>
            </div>
        </div>
    </div>
</section>

<!-- New Products Section -->
<section class="ftco-section ftco-no-pt bg-light">
    <div class="container">
        <div class="row justify-content-center mb-3 pb-3">
            <div class="col-md-12 heading-section text-center ftco-animate">
                <span class="subheading">Sản Phẩm Mới</span>
                <h2 class="mb-4">Món Ngon Mới Ra Lò</h2>
                <p>Thưởng thức những hương vị mới nhất từ Mộc Châu</p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row justify-content-center">
            @if (Model.NewProducts != null && Model.NewProducts.Any())
            {
                foreach (var product in Model.NewProducts)
                {
                    <div class="col-md-6 col-lg-3 ftco-animate">
                        <div class="product-card-premium">
                            <a href="@Url.Action("Details", "Product", new { id = product.ProductId })" class="product-img-wrap">
                                <img src="@(product.ImageUrl ?? "/images/prod-1.jpg")" alt="@product.ProductName">
                                <span class="status-badge status-new">Mới</span>
                            </a>
                            <div class="product-content">
                                <div class="product-category">Hoa Quả Sấy</div>
                                <h3 class="product-title">
                                    <a href="@Url.Action("Details", "Product", new { id = product.ProductId })">@product.ProductName</a>
                                </h3>
                                
                                <div class="product-price-row">
                                    @if (product.OriginalPrice > product.Price)
                                    {
                                        <span class="old-price">@product.OriginalPrice.Value.ToString("N0") đ</span>
                                    }
                                    <span class="current-price">@product.Price.ToString("N0") đ</span>
                                </div>

                                <div class="product-actions">
                                    <a href="@Url.Action("Details", "Product", new { id = product.ProductId })" class="btn-action btn-view">
                                        <i class="fa fa-eye"></i> Chi tiết
                                    </a>
                                    <form asp-controller="Cart" asp-action="AddToCart" method="post" class="flex-grow-1" style="flex: 1; display: flex;">
                                        <input type="hidden" name="productId" value="@product.ProductId" />
                                        <input type="hidden" name="quantity" value="1" />
                                        <button type="submit" class="btn-action btn-buy w-100">
                                            <i class="fa fa-shopping-cart"></i> Mua ngay
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else 
            {
                <div class="col-12 text-center">
                    <p>Đang cập nhật sản phẩm mới...</p>
                </div>
            }
        </div>
    </div>
</section>
